<!-- Modern Checkout Conversion Optimization Elements -->
<style>
/* Trust Badge Bar */
.checkout-trust-bar {
  background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
  border-top: 1px solid #e9ecef;
  border-bottom: 1px solid #e9ecef;
  padding: 12px 0;
  margin-bottom: 24px;
  animation: fadeInDown 0.6s ease-out;
}

.trust-badges {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 32px;
  flex-wrap: wrap;
}

.trust-badge {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: #495057;
  font-weight: 500;
}

.trust-badge svg {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
}

/* Progress Indicator */
.checkout-progress {
  background: white;
  padding: 20px 0;
  margin-bottom: 32px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.progress-steps {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  position: relative;
}

.progress-step {
  display: flex;
  align-items: center;
  gap: 8px;
}

.step-circle {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: #e9ecef;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 14px;
  color: #6c757d;
  transition: all 0.3s ease;
}

.step-circle.active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  transform: scale(1.1);
}

.step-circle.completed {
  background: #28a745;
  color: white;
}

.step-line {
  width: 60px;
  height: 2px;
  background: #e9ecef;
  position: relative;
}

.step-line.completed {
  background: #28a745;
}

.step-label {
  font-size: 12px;
  color: #6c757d;
  margin-left: 8px;
  white-space: nowrap;
}

/* Urgency Banner */
.urgency-banner {
  background: linear-gradient(135deg, #ff6b6b 0%, #ff8787 100%);
  color: white;
  padding: 12px 20px;
  border-radius: 8px;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}

.urgency-icon {
  animation: shake 1s infinite;
}

@keyframes shake {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-5deg); }
  75% { transform: rotate(5deg); }
}

/* Testimonial Widget */
.checkout-testimonial {
  background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
  border: 1px solid #667eea30;
  border-radius: 12px;
  padding: 20px;
  margin: 24px 0;
  position: relative;
  overflow: hidden;
}

.testimonial-quote {
  font-style: italic;
  font-size: 15px;
  line-height: 1.6;
  color: #495057;
  margin-bottom: 12px;
  position: relative;
  padding-left: 32px;
}

.testimonial-quote::before {
  content: '"';
  position: absolute;
  left: 0;
  top: -8px;
  font-size: 48px;
  color: #667eea30;
  font-family: Georgia, serif;
}

.testimonial-author {
  display: flex;
  align-items: center;
  gap: 12px;
}

.author-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 600;
}

.author-info {
  flex: 1;
}

.author-name {
  font-weight: 600;
  color: #212529;
  font-size: 14px;
}

.author-title {
  font-size: 12px;
  color: #6c757d;
}

.testimonial-rating {
  display: flex;
  gap: 2px;
  margin-bottom: 8px;
}

.star {
  color: #ffc107;
  font-size: 16px;
}

/* Money Back Guarantee */
.guarantee-badge {
  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
  color: white;
  border-radius: 12px;
  padding: 16px;
  text-align: center;
  margin: 24px 0;
  position: relative;
  overflow: hidden;
}

.guarantee-badge::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
  animation: shimmer 3s linear infinite;
}

@keyframes shimmer {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.guarantee-title {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.guarantee-subtitle {
  font-size: 13px;
  opacity: 0.95;
}

/* Secure Checkout Footer */
.secure-checkout-footer {
  margin-top: 32px;
  padding-top: 24px;
  border-top: 1px solid #e9ecef;
  text-align: center;
}

.payment-methods {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-bottom: 16px;
  flex-wrap: wrap;
}

.payment-icon {
  width: 48px;
  height: 30px;
  background: white;
  border: 1px solid #dee2e6;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  color: #6c757d;
  font-weight: 500;
}

.security-text {
  font-size: 12px;
  color: #6c757d;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .trust-badges {
    gap: 16px;
    font-size: 12px;
  }

  .progress-steps {
    gap: 4px;
  }

  .step-label {
    display: none;
  }

  .step-line {
    width: 30px;
  }

  .urgency-banner {
    font-size: 14px;
    padding: 10px;
  }
}

/* Animations */
@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Limited Spots Counter */
.limited-spots {
  background: #fff3cd;
  border: 1px solid #ffc107;
  border-radius: 8px;
  padding: 12px 16px;
  margin: 20px 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  animation: fadeInUp 0.6s ease-out;
}

.spots-count {
  font-weight: 700;
  color: #e85d00;
  font-size: 18px;
  animation: pulse 1s infinite;
}

/* Live Activity Indicator */
.activity-indicator {
  position: fixed;
  bottom: 20px;
  left: 20px;
  background: white;
  border-radius: 8px;
  padding: 12px 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  display: flex;
  align-items: center;
  gap: 12px;
  max-width: 280px;
  z-index: 1000;
  animation: slideInLeft 0.5s ease-out;
}

@keyframes slideInLeft {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.activity-dot {
  width: 8px;
  height: 8px;
  background: #28a745;
  border-radius: 50%;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

.activity-text {
  font-size: 13px;
  color: #495057;
}

.activity-location {
  font-weight: 600;
  color: #212529;
}
</style>

<script>
(function() {
  'use strict';

  // Add trust badges to checkout
  function addTrustBadges() {
    const checkoutElement = document.querySelector('.kjb-embedded-checkout, [data-pages-embedded-checkout]');
    if (!checkoutElement) return;

    // Check if already added
    if (document.querySelector('.checkout-trust-bar')) return;

    const trustBar = document.createElement('div');
    trustBar.className = 'checkout-trust-bar';
    trustBar.innerHTML = `
      <div class="trust-badges">
        <div class="trust-badge">
          <svg viewBox="0 0 24 24" fill="none" stroke="#28a745" stroke-width="2">
            <path d="M12 2L3 7v6c0 5.25 3.75 10.125 9 11 5.25-.875 9-5.75 9-11V7l-9-5z"/>
            <path d="M9 12l2 2 4-4"/>
          </svg>
          <span>Secure Checkout</span>
        </div>
        <div class="trust-badge">
          <svg viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="2">
            <rect x="3" y="7" width="18" height="12" rx="2"/>
            <path d="M8 7V5a4 4 0 018 0v2"/>
          </svg>
          <span>256-bit SSL</span>
        </div>
        <div class="trust-badge">
          <svg viewBox="0 0 24 24" fill="none" stroke="#ffc107" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
          <span>30-Day Guarantee</span>
        </div>
        <div class="trust-badge">
          <svg viewBox="0 0 24 24" fill="none" stroke="#17a2b8" stroke-width="2">
            <path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/>
          </svg>
          <span>10,000+ Happy Customers</span>
        </div>
      </div>
    `;

    checkoutElement.parentNode.insertBefore(trustBar, checkoutElement);
  }

  // Add progress indicator
  function addProgressIndicator() {
    const checkoutElement = document.querySelector('.kjb-embedded-checkout, [data-pages-embedded-checkout]');
    if (!checkoutElement) return;

    // Check if already added
    if (document.querySelector('.checkout-progress')) return;

    const progressBar = document.createElement('div');
    progressBar.className = 'checkout-progress';
    progressBar.innerHTML = `
      <div class="progress-steps">
        <div class="progress-step">
          <div class="step-circle completed">✓</div>
          <span class="step-label">Select</span>
        </div>
        <div class="step-line completed"></div>
        <div class="progress-step">
          <div class="step-circle active">2</div>
          <span class="step-label">Details</span>
        </div>
        <div class="step-line"></div>
        <div class="progress-step">
          <div class="step-circle">3</div>
          <span class="step-label">Complete</span>
        </div>
      </div>
    `;

    checkoutElement.parentNode.insertBefore(progressBar, checkoutElement);
  }

  // Add urgency banner
  function addUrgencyBanner() {
    const checkoutElement = document.querySelector('.kjb-embedded-checkout, [data-pages-embedded-checkout]');
    if (!checkoutElement) return;

    // Check if already added
    if (document.querySelector('.urgency-banner')) return;

    const urgencyBanner = document.createElement('div');
    urgencyBanner.className = 'urgency-banner';
    urgencyBanner.innerHTML = `
      <span class="urgency-icon">⏰</span>
      <span><strong>Limited Time Offer!</strong> This special price expires in <strong id="countdown">15:00</strong></span>
    `;

    checkoutElement.parentNode.insertBefore(urgencyBanner, checkoutElement);

    // Start countdown
    startCountdown();
  }

  // Countdown timer
  function startCountdown() {
    let minutes = 15;
    let seconds = 0;

    const countdownElement = document.getElementById('countdown');
    if (!countdownElement) return;

    const timer = setInterval(() => {
      if (seconds === 0) {
        if (minutes === 0) {
          clearInterval(timer);
          countdownElement.textContent = 'EXPIRED';
          return;
        }
        minutes--;
        seconds = 59;
      } else {
        seconds--;
      }

      countdownElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
    }, 1000);
  }

  // Add testimonial widget
  function addTestimonial() {
    const checkoutElement = document.querySelector('.kjb-embedded-checkout, [data-pages-embedded-checkout]');
    if (!checkoutElement) return;

    // Check if already added
    if (document.querySelector('.checkout-testimonial')) return;

    const testimonials = [
      {
        quote: "This program completely transformed how I connect with my children. Worth every penny!",
        author: "Sarah M.",
        title: "Mother of 3",
        avatar: "SM"
      },
      {
        quote: "The strategies I learned here saved my marriage and helped me become a better parent.",
        author: "David R.",
        title: "Father of 2",
        avatar: "DR"
      },
      {
        quote: "I wish I had found this sooner! The science-backed approach really works.",
        author: "Jennifer L.",
        title: "New Parent",
        avatar: "JL"
      }
    ];

    const randomTestimonial = testimonials[Math.floor(Math.random() * testimonials.length)];

    const testimonialWidget = document.createElement('div');
    testimonialWidget.className = 'checkout-testimonial';
    testimonialWidget.innerHTML = `
      <div class="testimonial-rating">
        <span class="star">★</span>
        <span class="star">★</span>
        <span class="star">★</span>
        <span class="star">★</span>
        <span class="star">★</span>
      </div>
      <div class="testimonial-quote">${randomTestimonial.quote}</div>
      <div class="testimonial-author">
        <div class="author-avatar">${randomTestimonial.avatar}</div>
        <div class="author-info">
          <div class="author-name">${randomTestimonial.author}</div>
          <div class="author-title">${randomTestimonial.title}</div>
        </div>
      </div>
    `;

    // Insert after checkout form
    checkoutElement.appendChild(testimonialWidget);
  }

  // Add money-back guarantee badge
  function addGuaranteeBadge() {
    const checkoutElement = document.querySelector('.kjb-embedded-checkout, [data-pages-embedded-checkout]');
    if (!checkoutElement) return;

    // Check if already added
    if (document.querySelector('.guarantee-badge')) return;

    const guaranteeBadge = document.createElement('div');
    guaranteeBadge.className = 'guarantee-badge';
    guaranteeBadge.innerHTML = `
      <div class="guarantee-title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2L3 7v6c0 5.25 3.75 10.125 9 11 5.25-.875 9-5.75 9-11V7l-9-5z"/>
          <path d="M9 12l2 2 4-4"/>
        </svg>
        30-Day Money-Back Guarantee
      </div>
      <div class="guarantee-subtitle">Try risk-free! If you're not completely satisfied, get a full refund.</div>
    `;

    checkoutElement.appendChild(guaranteeBadge);
  }

  // Add limited spots indicator
  function addLimitedSpots() {
    const checkoutElement = document.querySelector('.kjb-embedded-checkout, [data-pages-embedded-checkout]');
    if (!checkoutElement) return;

    // Check if already added
    if (document.querySelector('.limited-spots')) return;

    const spotsLeft = Math.floor(Math.random() * 5) + 3; // Random number between 3-7

    const limitedSpots = document.createElement('div');
    limitedSpots.className = 'limited-spots';
    limitedSpots.innerHTML = `
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e85d00" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <path d="M12 6v6l4 2"/>
      </svg>
      <span>Only <span class="spots-count">${spotsLeft}</span> spots left at this price!</span>
    `;

    checkoutElement.parentNode.insertBefore(limitedSpots, checkoutElement.nextSibling);
  }

  // Add secure checkout footer
  function addSecureFooter() {
    const checkoutElement = document.querySelector('.kjb-embedded-checkout, [data-pages-embedded-checkout]');
    if (!checkoutElement) return;

    // Check if already added
    if (document.querySelector('.secure-checkout-footer')) return;

    const secureFooter = document.createElement('div');
    secureFooter.className = 'secure-checkout-footer';
    secureFooter.innerHTML = `
      <div class="payment-methods">
        <div class="payment-icon">VISA</div>
        <div class="payment-icon">MC</div>
        <div class="payment-icon">AMEX</div>
        <div class="payment-icon">PayPal</div>
        <div class="payment-icon">Apple</div>
        <div class="payment-icon">Google</div>
      </div>
      <div class="security-text">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#28a745" stroke-width="2">
          <rect x="3" y="7" width="18" height="12" rx="2"/>
          <path d="M8 7V5a4 4 0 018 0v2"/>
        </svg>
        Your payment information is encrypted and secure
      </div>
    `;

    checkoutElement.appendChild(secureFooter);
  }

  // Add live activity indicator
  function addActivityIndicator() {
    // Check if already added
    if (document.querySelector('.activity-indicator')) return;

    const locations = ['New York', 'Los Angeles', 'Chicago', 'Houston', 'Phoenix', 'San Antonio', 'Dallas', 'San Jose', 'Austin', 'Jacksonville'];
    const randomLocation = locations[Math.floor(Math.random() * locations.length)];

    const activityIndicator = document.createElement('div');
    activityIndicator.className = 'activity-indicator';
    activityIndicator.innerHTML = `
      <div class="activity-dot"></div>
      <div>
        <div class="activity-text">Someone in <span class="activity-location">${randomLocation}</span></div>
        <div class="activity-text">just enrolled 3 minutes ago</div>
      </div>
    `;

    document.body.appendChild(activityIndicator);

    // Hide after 8 seconds
    setTimeout(() => {
      activityIndicator.style.animation = 'slideInLeft 0.5s ease-out reverse';
      setTimeout(() => activityIndicator.remove(), 500);
    }, 8000);

    // Show new activity every 30-60 seconds
    setInterval(() => {
      if (!document.querySelector('.activity-indicator')) {
        addActivityIndicator();
      }
    }, Math.random() * 30000 + 30000);
  }

  // Initialize all conversion elements
  function initConversionBoost() {
    console.log('[Checkout Conversion Boost] Initializing...');

    // Add all elements
    addTrustBadges();
    addProgressIndicator();
    addUrgencyBanner();
    addTestimonial();
    addGuaranteeBadge();
    addLimitedSpots();
    addSecureFooter();

    // Start activity indicator after 5 seconds
    setTimeout(addActivityIndicator, 5000);

    console.log('[Checkout Conversion Boost] All elements added');
  }

  // Start when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initConversionBoost);
  } else {
    initConversionBoost();
  }

  // Also run after a delay to catch dynamic content
  setTimeout(initConversionBoost, 2000);
})();
</script>