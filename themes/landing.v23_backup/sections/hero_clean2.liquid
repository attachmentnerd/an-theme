{% comment %}
  AN – Clean Hero
  - Image left or right
  - Primary CTA: solid or outline
  - Optional dropdown CTA with block links
  - Secondary CTA (solid or outline)
  - Saved Section–ready (has preset)
{% endcomment %}

{% assign s = section.settings %}

<section id="{{ s.section_id | default: 'hero' }}-{{ section.id }}" 
         class="an-clean-hero {% if s.invert %}is-invert{% endif %} pos-{{ s.image_position | default: 'left' }}" 
         data-clean-hero="{{ section.id }}">
  <style>
    [data-clean-hero="{{ section.id }}"]{
      --brand:#025157;
      --text:#0B1320;
      --muted:#6B7280;
      --bg:#ffffff;
      --bg-invert:#0B1320;
      --text-invert:#ffffff;
      --radius:16px;
      --space:clamp(16px,2vw,28px);
      padding: clamp(32px,6vw,80px) 0;
      background: var(--bg);
      color: var(--text);
    }
    [data-clean-hero="{{ section.id }}"].is-invert{
      background: var(--bg-invert);
      color: var(--text-invert);
    }
    [data-clean-hero="{{ section.id }}"] .container{
      max-width: {% if s.max_width == 'normal' %}1100px{% else %}1280px{% endif %};
      margin: 0 auto; padding: 0 clamp(16px,3vw,24px);
    }
    [data-clean-hero="{{ section.id }}"] .grid{
      display:grid; gap: clamp(20px,4vw,48px); align-items:center;
      grid-template-columns: 1fr 1.1fr;
    }
    [data-clean-hero="{{ section.id }}"].pos-right .grid{ grid-template-columns: 1.1fr 1fr; }
    [data-clean-hero="{{ section.id }}"] .media{ order: {% if s.image_position == 'right' %}2{% else %}1{% endif %}; }
    [data-clean-hero="{{ section.id }}"] .content{ order: {% if s.image_position == 'right' %}1{% else %}2{% endif %}; }
    [data-clean-hero="{{ section.id }}"] .cover{
      width:100%; display:block; border-radius: {{ s.image_radius | default: '16px' }};
      box-shadow: {% if s.image_shadow %}0 22px 45px rgba(0,0,0,.18){% else %}none{% endif %};
    }
    [data-clean-hero="{{ section.id }}"] .eyebrow{
      text-transform:uppercase; letter-spacing:.08em; font-weight:700; font-size:12px;
      color: var(--muted); margin-bottom: 8px;
    }
    [data-clean-hero="{{ section.id }}"].is-invert .eyebrow{ color: #A7B0BA; }
    [data-clean-hero="{{ section.id }}"] h1{
      font-size: clamp(32px,5.2vw,56px); line-height:1.05; margin: 0 0 14px 0;
    }
    [data-clean-hero="{{ section.id }}"] .subhead{
      font-size: clamp(16px,1.4vw,20px); line-height:1.6; color: var(--muted);
      margin-bottom: clamp(18px,2.2vw,28px);
    }
    [data-clean-hero="{{ section.id }}"].is-invert .subhead{ color: #D2D8DE; }
    [data-clean-hero="{{ section.id }}"] .ctas{ display:flex; flex-wrap:wrap; gap:12px; align-items:center; }

    /* Buttons */
    [data-clean-hero="{{ section.id }}"] .btn{
      display:inline-flex; align-items:center; gap:10px; cursor:pointer;
      padding:.85em 1.15em; border-radius: var(--radius);
      border:2px solid transparent; font-weight:700; text-decoration:none;
      transition: transform .06s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
      will-change: transform;
    }
    [data-clean-hero="{{ section.id }}"] .btn:active{ transform: translateY(1px); }
    /* Solid */
    [data-clean-hero="{{ section.id }}"] .btn-solid{ background: var(--brand); color:#fff; border-color: var(--brand); }
    [data-clean-hero="{{ section.id }}"] .btn-solid:hover{ box-shadow:0 8px 20px rgba(2,81,87,.25); }
    /* Outline */
    [data-clean-hero="{{ section.id }}"] .btn-outline{
      background:transparent; color: var(--brand); border-color: var(--brand);
    }
    [data-clean-hero="{{ section.id }}"] .btn-outline:hover{ background: rgba(2,81,87,.07); }

    /* Split dropdown CTA */
    [data-clean-hero="{{ section.id }}"] .split{
      position:relative; display:inline-flex; align-items:stretch;
      border-radius: var(--radius); overflow:hidden;
    }
    [data-clean-hero="{{ section.id }}"] .split .btn-main{ border-top-right-radius:0; border-bottom-right-radius:0; }
    [data-clean-hero="{{ section.id }}"] .split .btn-caret{ border-left:1px solid rgba(0,0,0,.1); padding:.85em .95em; }
    [data-clean-hero="{{ section.id }}"] .menu{
      position:absolute; top: calc(100% + 6px); left:0; min-width: 240px; z-index:40;
      background: #fff; color:#0B1320; border-radius: 12px; box-shadow:0 12px 32px rgba(0,0,0,.18);
      padding:6px; list-style:none; margin:0;
    }
    [data-clean-hero="{{ section.id }}"].is-invert .menu{ background:#101826; color:#fff; }
    [data-clean-hero="{{ section.id }}"] .menu a{
      display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; text-decoration:none;
      color: inherit; font-weight:600;
    }
    [data-clean-hero="{{ section.id }}"] .menu a:hover{ background: rgba(2,81,87,.1); }
    [data-clean-hero="{{ section.id }}"].is-invert .menu a:hover{ background: rgba(255,255,255,.08); }

    @media (max-width: 920px){
      [data-clean-hero="{{ section.id }}"] .grid{ grid-template-columns: 1fr; }
      [data-clean-hero="{{ section.id }}"] .content{ text-align:center; }
      [data-clean-hero="{{ section.id }}"] .ctas{ justify-content:center; }
    }
  </style>

  <div class="container">
    <div class="grid">
      {% if s.show_image and s.image != blank %}
        <div class="media">
          <img class="cover" src="{{ s.image }}" alt="{{ s.image_alt | default: s.headline | escape }}" loading="eager" fetchpriority="high" decoding="async">
        </div>
      {% endif %}

      <div class="content">
        {% if s.eyebrow != blank %}<div class="eyebrow">{{ s.eyebrow }}</div>{% endif %}
        {% if s.headline != blank %}<h1>{{ s.headline }}</h1>{% endif %}
        {% if s.subhead != blank %}<div class="subhead">{{ s.subhead }}</div>{% endif %}

        <div class="ctas">
          {%- assign p_style = s.primary_style | default: 'solid' -%}
          {%- assign sec_style = s.secondary_style | default: 'outline' -%}

          {%- if s.use_dropdown and section.blocks.size > 0 -%}
            <div class="split">
              {% if s.primary_url != blank and s.primary_label != blank %}
                <a class="btn btn-{{ p_style }} btn-main"
                   href="{{ s.primary_url }}"
                   {% if s.new_tab_primary %}target="_blank" rel="noopener"{% endif %}
                   data-evt="hero_primary_click" data-page="{{ request.path }}">
                  {{ s.primary_label }}
                </a>
              {% endif %}
              <button class="btn btn-{{ p_style }} btn-caret"
                      aria-haspopup="menu"
                      aria-expanded="false"
                      aria-controls="menu-{{ section.id }}"
                      type="button">
                <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                  <path d="M5.5 7.5l4.5 4.5 4.5-4.5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
                </svg>
              </button>

              <ul class="menu" id="menu-{{ section.id }}" hidden>
                {% for block in section.blocks %}
                  {% assign b = block.settings %}
                  {% if b.label != blank and b.url != blank %}
                    <li>
                      <a href="{{ b.url }}"
                         {% if b.new_tab %}target="_blank" rel="noopener"{% endif %}
                         data-evt="hero_dropdown_click" data-item="{{ b.label | escape }}" data-page="{{ request.path }}">
                        {{ b.label }}
                      </a>
                    </li>
                  {% endif %}
                {% endfor %}
              </ul>
            </div>
          {%- else -%}
            {% if s.primary_url != blank and s.primary_label != blank %}
              <a class="btn btn-{{ p_style }}"
                 href="{{ s.primary_url }}"
                 {% if s.new_tab_primary %}target="_blank" rel="noopener"{% endif %}
                 data-evt="hero_primary_click" data-page="{{ request.path }}">
                {{ s.primary_label }}
              </a>
            {% endif %}
          {%- endif -%}

          {% if s.secondary_url != blank and s.secondary_label != blank %}
            <a class="btn btn-{{ sec_style }}"
               href="{{ s.secondary_url }}"
               {% if s.new_tab_secondary %}target="_blank" rel="noopener"{% endif %}
               data-evt="hero_secondary_click" data-page="{{ request.path }}">
              {{ s.secondary_label }}
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      var root = document.querySelector('[data-clean-hero="{{ section.id }}"]');
      if(!root) return;
      var toggle = root.querySelector('.btn-caret');
      var menu = root.querySelector('#menu-{{ section.id }}');
      if(!toggle || !menu) return;

      function closeMenu(){ menu.hidden = true; toggle.setAttribute('aria-expanded','false'); }
      function openMenu(){ menu.hidden = false; toggle.setAttribute('aria-expanded','true'); }

      toggle.addEventListener('click', function(e){
        e.preventDefault();
        (menu.hidden ? openMenu() : closeMenu());
      });

      document.addEventListener('click', function(e){
        if(!root.contains(e.target)) closeMenu();
      });

      root.addEventListener('keydown', function(e){
        if(e.key === 'Escape') closeMenu();
      });
    })();
  </script>
</section>

{% schema %}
{
  "name": "AN – Clean Hero",
  "presets": [{ "name": "AN – Clean Hero" }],
  "settings": [
    { "type": "text", "id": "section_id", "label": "Section ID", "default": "hero", "info": "Custom ID for internal linking (e.g., #hero)" },
    { "type": "checkbox", "id": "show_image", "label": "Show image", "default": true },
    { "type": "image_picker", "id": "image", "label": "Hero image" },
    { "type": "text", "id": "image_alt", "label": "Image alt text" },
    { "type": "select", "id": "image_position", "label": "Image position", "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" }
      ], "default": "left"
    },
    { "type": "checkbox", "id": "image_shadow", "label": "Image shadow", "default": true },
    { "type": "text", "id": "image_radius", "label": "Image corner radius (e.g., 0, 12px, 24px)", "default": "16px" },

    { "type": "text", "id": "eyebrow", "label": "Eyebrow" },
    { "type": "text", "id": "headline", "label": "Headline", "default": "The Fastest Way to Change Your Life" },
    { "type": "textarea", "id": "subhead", "label": "Subhead", "default": "You are just five seconds away from a totally different life." },

    { "type": "select", "id": "max_width", "label": "Content width", "options": [
        { "value": "normal", "label": "Normal" },
        { "value": "wide", "label": "Wide" }
      ], "default": "wide"
    },
    { "type": "checkbox", "id": "invert", "label": "Dark background", "default": false },

    { "type": "text", "id": "primary_label", "label": "Primary label", "default": "Get the book" },
    { "type": "url", "id": "primary_url", "label": "Primary URL" },
    { "type": "select", "id": "primary_style", "label": "Primary style", "options": [
        { "value": "solid", "label": "Solid" },
        { "value": "outline", "label": "Outline" }
      ], "default": "solid"
    },
    { "type": "checkbox", "id": "new_tab_primary", "label": "Open primary in new tab", "default": false },

    { "type": "checkbox", "id": "use_dropdown", "label": "Use dropdown on primary CTA", "default": true },

    { "type": "text", "id": "secondary_label", "label": "Secondary label" },
    { "type": "url", "id": "secondary_url", "label": "Secondary URL" },
    { "type": "select", "id": "secondary_style", "label": "Secondary style", "options": [
        { "value": "solid", "label": "Solid" },
        { "value": "outline", "label": "Outline" }
      ], "default": "outline"
    },
    { "type": "checkbox", "id": "new_tab_secondary", "label": "Open secondary in new tab", "default": false }
  ],
  "blocks": [
    {
      "type": "link",
      "name": "Dropdown link",
      "settings": [
        { "type": "text", "id": "label", "label": "Label", "default": "Buy on Amazon" },
        { "type": "url", "id": "url", "label": "URL" },
        { "type": "checkbox", "id": "new_tab", "label": "Open in new tab", "default": true }
      ]
    }
  ],
  "max_blocks": 6
}
{% endschema %}
