{% comment %}
  Landing — Hero (Editable, Shared)
  - Centered credibility pill, large multi-line heading with accent span
  - Subheading and optional rating row
  - Accent highlighting via [[ ... ]] markers inside heading
  - Accessible, responsive, token-driven; safe in website/landing/product
{% endcomment %}

{% assign s_id = section.id %}
{% assign dom_id = section.settings.section_id | default: 'landing-hero' %}

{% assign accent = section.settings.accent_color | default: 'var(--c-brand-600, #1F7AE0)' %}
{% assign title_color = section.settings.title_color | default: 'var(--c-ink-950, #0d1321)' %}
{% assign sub_color = section.settings.sub_color | default: 'var(--c-ink-700, #4a5165)' %}
{% assign pill_bg = section.settings.pill_bg | default: '#EAF2FF' %}
{% assign pill_border = section.settings.pill_border | default: 'var(--border-light, #ECEAFA)' %}

<section id="{{ dom_id }}-{{ s_id }}" class="an-section an-theme an-white landing-hero">
  <div class="lh-wrap">
    {% if section.settings.show_cred and section.settings.credibility != blank %}
      {% assign parts = section.settings.credibility | split: '|' %}
      <div class="lh-cred an-reveal" role="note" aria-label="Credibility">
        <div class="lh-pill" role="list">
          {% for p in parts %}
            {% assign pt = p | strip %}
            {% if pt != blank %}
              <span class="lh-chip" role="listitem">{{ pt }}</span>
              {% unless forloop.last %}<span class="lh-sep" aria-hidden="true">|</span>{% endunless %}
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endif %}

    <header class="lh-hero an-reveal">
      {% assign h = section.settings.heading | default: 'Turn Your Hardest Parenting Moments\nInto Your [[Strongest Connections]]' %}
      {% assign h = h | replace: '[[', '<span class="lh-accent">' | replace: ']]', '</span>' %}
      <h1 class="lh-title">{{ h | newline_to_br }}</h1>
      {% if section.settings.subheading != blank %}
        <p class="lh-sub">{{ section.settings.subheading }}</p>
      {% endif %}
    </header>

    {% if section.settings.show_rating and section.settings.rating_text != blank %}
      <div class="lh-rating an-reveal" role="note" aria-label="Rating">
        <span class="lh-stars" aria-hidden="true" title="Five stars">
          <span class="lh-star">★</span><span class="lh-star">★</span><span class="lh-star">★</span><span class="lh-star">★</span><span class="lh-star">★</span>
        </span>
        {% if section.settings.rating_link != blank %}
          <a class="lh-rating-text" href="{{ section.settings.rating_link }}" {% if section.settings.rating_new_tab %}target="_blank" rel="noopener noreferrer"{% endif %}>{{ section.settings.rating_text }}</a>
        {% else %}
          <span class="lh-rating-text">{{ section.settings.rating_text }}</span>
        {% endif %}
      </div>
    {% endif %}
  </div>

  <style>
    #{{ dom_id }}-{{ s_id }}.landing-hero{position:relative;
      --pt: {{ section.settings.pad_top_desktop | default: 88 }}px;
      --pb: {{ section.settings.pad_bottom_desktop | default: 72 }}px;
      --px: {{ section.settings.pad_x_desktop | default: 22 }}px;
    }
    @media (max-width: 700px){
      #{{ dom_id }}-{{ s_id }}.landing-hero{
        --pt: {{ section.settings.pad_top_mobile | default: 58 }}px;
        --pb: {{ section.settings.pad_bottom_mobile | default: 48 }}px;
        --px: {{ section.settings.pad_x_mobile | default: 16 }}px;
      }
    }
    #{{ dom_id }}-{{ s_id }} .lh-wrap{max-width:{{ section.settings.max_width | default: 980 }}px; margin:0 auto; padding:var(--pt) var(--px) var(--pb)}

    /* Reveal (fail-open) */
    #{{ dom_id }}-{{ s_id }} .an-reveal{opacity:1; transform:none}
    html.an-js #{{ dom_id }}-{{ s_id }} .an-reveal{opacity:0; transform:translateY(24px); transition:opacity .5s cubic-bezier(.2,.7,.2,1), transform .5s cubic-bezier(.2,.7,.2,1)}
    html.an-js #{{ dom_id }}-{{ s_id }} .an-reveal.is-in{opacity:1; transform:none}
    @media (prefers-reduced-motion: reduce){ html.an-js #{{ dom_id }}-{{ s_id }} .an-reveal{transition:none !important; transform:none !important; opacity:1 !important} }

    /* Credibility pill */
    #{{ dom_id }}-{{ s_id }} .lh-cred{display:flex; justify-content:center; margin:0 0 16px; padding:0 var(--px)}
    #{{ dom_id }}-{{ s_id }} .lh-pill{display:flex; flex-wrap:wrap; column-gap:10px; row-gap:6px; align-items:center; justify-content:center; padding:8px 14px; border-radius:9999px; background:{{ pill_bg }}; border:1px solid {{ pill_border }}; color:var(--c-ink-800); font-size:clamp(12px, 2.4vw, 15px); max-width:100%}
    #{{ dom_id }}-{{ s_id }} .lh-chip{white-space:nowrap}
    #{{ dom_id }}-{{ s_id }} .lh-sep{opacity:.5; margin:0 4px}
    @media (max-width: 600px){ #{{ dom_id }}-{{ s_id }} .lh-sep{display:none} }

    /* Hero */
    #{{ dom_id }}-{{ s_id }} .lh-hero{text-align:center}
    #{{ dom_id }}-{{ s_id }} .lh-title{margin:0 0 12px; font-weight:900; line-height:1.08; letter-spacing:-.01em; color:{{ title_color }}; font-size:clamp({{ section.settings.min_title_px | default: 36 }}px, 8vw, {{ section.settings.max_title_px | default: 96 }}px)}
    #{{ dom_id }}-{{ s_id }} .lh-title .lh-accent{color:{{ accent }}}
    #{{ dom_id }}-{{ s_id }} .lh-sub{margin:0 auto; max-width:900px; text-align:center; font-size:clamp(15px, 2.3vw, 22px); line-height:1.5; color:{{ sub_color }}}

    /* Rating */
    #{{ dom_id }}-{{ s_id }} .lh-rating{display:flex; gap:10px; align-items:center; justify-content:center; margin:16px 0 0}
    #{{ dom_id }}-{{ s_id }} .lh-stars{display:inline-flex; gap:2px}
    #{{ dom_id }}-{{ s_id }} .lh-star{color:#FFB400; font-size:clamp(16px, 2.4vw, 22px); line-height:1}
    #{{ dom_id }}-{{ s_id }} .lh-rating-text{color:{{ accent }}; font-weight:700; text-decoration:none}
    #{{ dom_id }}-{{ s_id }} .lh-rating-text:hover{text-decoration:underline}
  </style>

  <script>
    (function(){
      document.documentElement.classList.add('an-js');
      var root = document.getElementById('{{ dom_id }}-{{ s_id }}');
      if(!root || root.dataset.inited==='1') return; root.dataset.inited='1';

      // Reveal on view
      var items = [].slice.call(root.querySelectorAll('.an-reveal'));
      function showAll(){ items.forEach(function(n){ n.classList.add('is-in'); }); }
      var inEditor = location.search.indexOf('preview')>-1 || !!document.querySelector('[data-kajabi-theme-editor],[data-builder],[data-editor]');
      if('IntersectionObserver' in window && !inEditor){
        var io = new IntersectionObserver(function(entries){ entries.forEach(function(e){ if(e.isIntersecting){ e.target.classList.add('is-in'); io.unobserve(e.target);} }); }, {threshold:.2});
        items.forEach(function(n){ io.observe(n); });
        setTimeout(function(){ items.forEach(function(n){ n.classList.add('is-in'); }); }, 1400);
      } else { showAll(); }
    })();
  </script>
</section>

{% schema %}
{
  "name": "Landing — Hero (Editable)",
  "elements": [
    { "type": "text", "id": "section_id", "label": "Section ID", "default": "landing-hero" },
    { "type": "checkbox", "id": "show_cred", "label": "Show credibility pill", "default": true },
    { "type": "textarea", "id": "credibility", "label": "Credibility text (use | to separate)", "default": "Eli Harwood, LPC | 1M+ Parents Helped | 17 Years Clinical Experience | USA Today Bestselling Author" },

    { "type": "textarea", "id": "heading", "label": "Heading (use [[...]] to accent; new lines create breaks)", "default": "Turn Your Hardest Parenting Moments\nInto Your [[Strongest Connections]]" },
    { "type": "textarea", "id": "subheading", "label": "Subheading", "default": "The research-proven approach that helps families go from surviving to thriving — starting with your very next interaction" },

    { "type": "checkbox", "id": "show_rating", "label": "Show rating row", "default": true },
    { "type": "text", "id": "rating_text", "label": "Rating text", "default": "4.9/5 from 2,847 parents" },
    { "type": "action", "id": "rating_link", "label": "Rating link (optional)", "default": "" },
    { "type": "checkbox", "id": "rating_new_tab", "label": "Open rating link in new tab", "default": false },

    { "type": "text", "id": "accent_color", "label": "Accent color", "default": "#1F7AE0" },
    { "type": "text", "id": "title_color", "label": "Title color", "default": "#0d1321" },
    { "type": "text", "id": "sub_color", "label": "Subheading color", "default": "#4a5165" },
    { "type": "range", "id": "min_title_px", "label": "Min title size (px)", "default": 36, "min": 24, "max": 80, "step": 1 },
    { "type": "range", "id": "max_title_px", "label": "Max title size (px)", "default": 96, "min": 48, "max": 140, "step": 1 },
    { "type": "range", "id": "max_width", "label": "Content max width (px)", "default": 980, "min": 680, "max": 1280, "step": 10 },
    { "type": "range", "id": "pad_top_desktop", "label": "Padding top — desktop (px)", "default": 88, "min": 0, "max": 200, "step": 2 },
    { "type": "range", "id": "pad_bottom_desktop", "label": "Padding bottom — desktop (px)", "default": 72, "min": 0, "max": 200, "step": 2 },
    { "type": "range", "id": "pad_x_desktop", "label": "Side padding — desktop (px)", "default": 22, "min": 0, "max": 80, "step": 2 },
    { "type": "range", "id": "pad_top_mobile", "label": "Padding top — mobile (px)", "default": 58, "min": 0, "max": 200, "step": 2 },
    { "type": "range", "id": "pad_bottom_mobile", "label": "Padding bottom — mobile (px)", "default": 48, "min": 0, "max": 200, "step": 2 },
    { "type": "range", "id": "pad_x_mobile", "label": "Side padding — mobile (px)", "default": 16, "min": 0, "max": 80, "step": 2 },
    { "type": "text", "id": "pill_bg", "label": "Pill background", "default": "#EAF2FF" },
    { "type": "text", "id": "pill_border", "label": "Pill border color", "default": "#ECEAFA" }
  ],
  "blocks": [],
  "presets": [
    {
      "name": "Landing — Hero",
      "category": "Hero",
      "settings": {
        "show_cred": true,
        "credibility": "Eli Harwood, LPC | 1M+ Parents Helped | 17 Years Clinical Experience | USA Today Bestselling Author",
        "heading": "Turn Your Hardest Parenting Moments\nInto Your [[Strongest Connections]]",
        "subheading": "The research-proven approach that helps families go from surviving to thriving — starting with your very next interaction",
        "show_rating": true,
        "rating_text": "4.9/5 from 2,847 parents",
        "accent_color": "#1F7AE0",
        "title_color": "#0d1321",
        "sub_color": "#4a5165",
        "max_title_px": 96,
        "pill_bg": "#EAF2FF",
        "pill_border": "#ECEAFA"
      }
    }
  ]
}
{% endschema %}
