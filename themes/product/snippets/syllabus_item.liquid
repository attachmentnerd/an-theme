{% assign s-Truncate = section.settings.truncate | default: "100" %}

<div class="syllabus__item syllabus__module-card" id="post-{{ post.id }}">
  <a href="{{ post.url }}" class="syllabus__module-link">
    <div class="syllabus__module-inner">
      <div class="syllabus__module-media">
        {% if post.poster_image_url %}
          <img src="{{ post.poster_image_url }}" alt="{{ post.title }}" />
        {% else %}
          <img src="{{ 'placeholder.png' | asset_url }}" alt="{{ post.title }}" />
        {% endif %}
        {% if post.media_type %}
          <div class="syllabus__module-type">
            {% case post.media_type %}
              {% when 'video' %}
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M8 7L13 10L8 13V7Z" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              {% when 'audio' %}
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 2L3 8H1V12H3L9 18V2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M13.5 7C14.1 7.6 14.5 8.3 14.5 10C14.5 11.7 14.1 12.4 13.5 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              {% when 'text' %}
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14 2H6C4.9 2 4 2.9 4 4V16C4 17.1 4.9 18 6 18H14C15.1 18 16 17.1 16 16V4C16 2.9 15.1 2 14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M8 6H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M8 10H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M8 14H10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            {% endcase %}
          </div>
        {% endif %}
        {% if post.completed? %}
          <div class="syllabus__module-completed">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12" r="10" fill="currentColor"/>
              <path d="M8 12L11 15L16 9" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        {% endif %}
      </div>
      <div class="syllabus__module-content">
        <h4 class="syllabus__module-title">{{ post.title }}</h4>
        {% if post.body %}
          <p class="syllabus__module-text">{{ post.body | strip_html | truncate: s-Truncate }}</p>
        {% endif %}
        <div class="syllabus__module-meta">
          {% if post.duration %}
            <span class="syllabus__module-duration">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
                <path d="M8 4V8L10.5 10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              {{ post.duration }} min
            </span>
          {% endif %}
          <div class="syllabus__module-progress">
            {% include "progress", is_completed: post.completed?, percent_complete: post.progress_percent %}
          </div>
        </div>
      </div>
    </div>
  </a>
</div>
