{% comment %}
  Big Idea — Bold Quote Card
  - Purpose: Simple, high-impact card with bold background and large white text
  - Controls: Label, body text, background color (presets + custom), alignment, padding, rounded
  - Style: Scoped to section id; no external dependencies; matches AN aesthetics
{% endcomment %}

{% assign bg_choice = section.settings.bg | default: 'brand' %}
{% capture bg_value_raw %}
  {% case bg_choice %}
    {% when 'brand' %}var(--c-brand-700, #5E3BFF)
    {% when 'indigo' %}#4F46E5
    {% when 'violet' %}#7C3AED
    {% when 'teal' %}#0D9488
    {% when 'emerald' %}#059669
    {% when 'rose' %}#E11D48
    {% when 'amber' %}#D97706
    {% when 'slate' %}#1F2937
    {% when 'ink' %}var(--c-ink-900, #1B1B29)
    {% when 'black' %}#0B0B10
    {% when 'custom' %}{{ section.settings.custom_bg | default: '#111827' }}
    {% else %}var(--c-brand-700, #5E3BFF)
  {% endcase %}
{% endcapture %}
{% assign bg_value = bg_value_raw | strip %}

<section id="big-idea-{{ section.id }}" class="an-section an-theme">
  <div class="an-container">
    <article
      class="bi-card bi-pad-{{ section.settings.padding | default: 'lg' }} bi-align-{{ section.settings.align | default: 'center' }}{% if section.settings.rounded %} is-rounded{% endif %} an-reveal"
      style="--bi-bg: {{ bg_value }};"
      aria-label="Big idea card">
      {% if section.settings.label != blank %}
        <p class="bi-label">{{ section.settings.label }}</p>
      {% endif %}
      {% if section.settings.body != blank %}
        <h2 class="bi-text">{{ section.settings.body }}</h2>
      {% endif %}
    </article>
  </div>

  <style>
    /* Fail-open reveal */
    #big-idea-{{ section.id }} .an-reveal{opacity:1; transform:none}
    html.an-js #big-idea-{{ section.id }} .an-reveal{
      opacity:0; transform:translateY(20px);
      transition:opacity .5s cubic-bezier(.2,.7,.2,1), transform .5s cubic-bezier(.2,.7,.2,1);
    }
    html.an-js #big-idea-{{ section.id }} .an-reveal.is-in{opacity:1; transform:none}

    /* Container */
    #big-idea-{{ section.id }} .an-container{max-width:1100px; margin:0 auto; padding:56px 20px}

    /* Card */
    #big-idea-{{ section.id }} .bi-card{
      background:var(--bi-bg);
      color:#fff;
      border:1px solid rgba(255,255,255,.12);
      border-radius:16px;
      box-shadow:0 16px 40px rgba(0,0,0,.20), 0 0 0 1px rgba(255,255,255,.06) inset;
    }
    #big-idea-{{ section.id }} .bi-card.is-rounded{border-radius:24px}

    /* Padding options */
    #big-idea-{{ section.id }} .bi-pad-sm{padding:20px}
    #big-idea-{{ section.id }} .bi-pad-md{padding:32px}
    #big-idea-{{ section.id }} .bi-pad-lg{padding:44px}
    @media (min-width: 720px){
      #big-idea-{{ section.id }} .bi-pad-sm{padding:24px}
      #big-idea-{{ section.id }} .bi-pad-md{padding:40px}
      #big-idea-{{ section.id }} .bi-pad-lg{padding:56px}
    }

    /* Alignment */
    #big-idea-{{ section.id }} .bi-align-left{text-align:left}
    #big-idea-{{ section.id }} .bi-align-center{text-align:center}
    #big-idea-{{ section.id }} .bi-align-right{text-align:right}

    /* Label */
    #big-idea-{{ section.id }} .bi-label{
      display:inline-block;
      font-size:.85rem;
      letter-spacing:.08em;
      text-transform:uppercase;
      font-weight:700;
      line-height:1;
      opacity:.92;
      background:rgba(255,255,255,.12);
      color:#fff;
      padding:8px 12px;
      border-radius:9999px;
      margin:0 0 10px;
      backdrop-filter:saturate(120%) blur(2px);
    }

    /* Text */
    #big-idea-{{ section.id }} .bi-text{
      margin:6px 0 0;
      font-weight:800;
      line-height:1.08;
      letter-spacing:-.01em;
      font-size:clamp(1.9rem, 1.2rem + 2.6vw, 3.3rem);
    }
    #big-idea-{{ section.id }} .bi-text strong{font-weight:900}

    /* Very small phones */
    @media (max-width: 360px){
      #big-idea-{{ section.id }} .an-container{ padding:48px 16px; }
    }
  </style>

  <!-- Scoped Reveal JS (defensive) -->
  <script>
    (function(){
      document.documentElement.classList.add('an-js');
      var root = document.getElementById('big-idea-{{ section.id }}');
      if(!root || root.dataset.inited==='1') return; root.dataset.inited='1';
      var items = [].slice.call(root.querySelectorAll('.an-reveal'));
      function showAll(){ items.forEach(function(n){ n.classList.add('is-in'); }); }
      var inEditor =
        location.search.indexOf('preview')>-1 ||
        !!document.querySelector('[data-kajabi-theme-editor],[data-builder],[data-editor]') ||
        (function(){ try { return window.top !== window.self; } catch(e){ return true; } })();
      if('IntersectionObserver' in window && !inEditor){
        var io = new IntersectionObserver(function(entries){
          entries.forEach(function(e){ if(e.isIntersecting){ e.target.classList.add('is-in'); io.unobserve(e.target); }});
        }, {threshold:.2});
        items.forEach(function(n){ io.observe(n); });
        setTimeout(function(){ items.filter(function(n){ return !n.classList.contains('is-in'); }).forEach(function(n){ n.classList.add('is-in'); }); }, 1400);
      } else { showAll(); }
    })();
  </script>
</section>

{% schema %}
{
  "name": "Big Idea — Quote Card",
  "elements": [
    { "type": "header", "content": "Content" },
    { "type": "text", "id": "label", "label": "Label", "default": "Big Idea" },
    { "type": "textarea", "id": "body", "label": "Text", "default": "We are wired to handle suffering and struggle, but we are wired to handle them in the context of caring others, in support, in a dynamic of attachment." },

    { "type": "header", "content": "Style" },
    { "type": "select", "id": "bg", "label": "Background", "default": "brand", "options": [
      { "label": "Brand", "value": "brand" },
      { "label": "Indigo", "value": "indigo" },
      { "label": "Violet", "value": "violet" },
      { "label": "Teal", "value": "teal" },
      { "label": "Emerald", "value": "emerald" },
      { "label": "Rose", "value": "rose" },
      { "label": "Amber", "value": "amber" },
      { "label": "Slate", "value": "slate" },
      { "label": "Ink", "value": "ink" },
      { "label": "Black", "value": "black" },
      { "label": "Custom…", "value": "custom" }
    ] },
    { "type": "color", "id": "custom_bg", "label": "Custom background", "default": "#1F2937" },
    { "type": "select", "id": "align", "label": "Text alignment", "default": "center", "options": [
      { "label": "Left", "value": "left" },
      { "label": "Center", "value": "center" },
      { "label": "Right", "value": "right" }
    ] },
    { "type": "select", "id": "padding", "label": "Padding", "default": "lg", "options": [
      { "label": "Compact", "value": "sm" },
      { "label": "Comfortable", "value": "md" },
      { "label": "Spacious", "value": "lg" }
    ] },
    { "type": "checkbox", "id": "rounded", "label": "Extra rounded corners", "default": true }
  ],
  "presets": [
    { "name": "Big Idea — Quote Card", "category": "Content" }
  ]
}
{% endschema %}


