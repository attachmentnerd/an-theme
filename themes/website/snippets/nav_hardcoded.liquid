{% comment %}
Hardcoded Navigation Snippet
- No blocks or section schema
- Uses theme settings for logo URLs and invert toggle
- Hardcoded links, CTA, and login/library
{% endcomment %}

{% assign logo_normal = settings.nav_logo_url | default: 'https://kajabi-storefronts-production.kajabi-cdn.com/kajabi-storefronts-production/file-uploads/themes/2162370086/settings_images/708217-6dc8-6e80-0466-7b518dfb74c7_6a4860b8-00bb-47fd-8078-c7f4dd4e5385.png' %}
{% assign logo_inverted = settings.nav_logo_url_inverted | default: 'https://kajabi-storefronts-production.kajabi-cdn.com/kajabi-storefronts-production//sites/2148666703/images/1d1d2ffe-9376-4248-b082-df05323d5e0b.webp' %}
{% assign use_inverted = settings.nav_use_inverted_logo %}
{% if use_inverted %}
  {% assign logo_current = logo_inverted %}
{% else %}
  {% assign logo_current = logo_normal %}
{% endif %}

{% assign nav_links_string = 'About=>/about|Books=>/books|Podcast=>/podcast|Speaking=>/speaking|Program=>/program/secure-parenting' %}
{% assign nav_links = nav_links_string | split: '|' %}
{% assign cta_label = 'Get Started' %}
{% assign cta_url = '/program/secure-parenting' %}
{% assign login_url = '/login' %}
{% assign profile_label = 'Login' %}
{% assign profile_event = 'nav_login' %}
{% if current_site_user %}
  {% assign login_url = '/library' %}
  {% assign profile_label = current_site_user.name | default: current_site_user.email | default: 'My Library' %}
  {% assign profile_event = 'nav_library' %}
{% endif %}

<style>
  .hc-nav {
    position: sticky;
    top: 0;
    z-index: 9999;
    padding: 0.9rem 0;
    background: #ffffffcc;
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(15,23,42,0.08);
  }
  .hc-nav__container{display:flex;align-items:center;gap:1rem;justify-content:space-between}
  .hc-nav__logo{display:inline-flex;align-items:center;text-decoration:none}
  .hc-nav__logo img{height:32px;width:auto;display:block}
  .hc-nav__links{display:flex;align-items:center;gap:0.5rem}
  .hc-nav__link{display:inline-flex;min-width:60px;padding:0.45rem 0.9rem;border-radius:999px;color:#374151;text-decoration:none;font-weight:500}
  .hc-nav__link:hover{color:#5e3bff;background:rgba(94,59,255,0.08)}
  .hc-nav__actions{display:flex;align-items:center;gap:0.75rem;margin-left:auto}
  .hc-nav__avatar{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;border:2px solid rgba(94,59,255,0.2);background:#fff;text-decoration:none;color:#1f2937;font-weight:600}
  .hc-nav__cta{display:inline-flex;align-items:center;justify-content:center;padding:0.6rem 1.2rem;border-radius:999px;background:linear-gradient(135deg,#5e3bff 0%,#7b66ff 100%);color:#fff;text-decoration:none;font-weight:600}
  .hc-nav__toggle{display:none;flex-direction:column;gap:3px;width:44px;height:44px;border-radius:50%;border:1px solid rgba(148,163,184,0.35);background:#fff}
  .hc-nav__toggle span{display:block;width:18px;height:2px;background:#1f2937;border-radius:999px;margin:0 auto}
  .hc-nav__drawer{display:none}
  .hc-nav.is-open .hc-nav__drawer{display:flex;position:fixed;inset:0;z-index:995;flex-direction:column;justify-content:center;align-items:center;gap:1.2rem;background:rgba(15,23,42,0.96)}
  .hc-nav.is-open .hc-nav__drawer a{color:#e2e8f0;text-decoration:none;font-size:1.2rem}
  @media(max-width:1024px){
    .hc-nav{padding:0.7rem 0}
    .hc-nav__links{display:none}
    .hc-nav__actions{display:none}
    .hc-nav__toggle{display:flex}
  }
</style>

<nav class="hc-nav">
  <div class="container hc-nav__container">
    <a class="hc-nav__logo" href="{{ current_site.root_url | default: '/' }}">
      <img src="{{ logo_current }}" alt="Logo">
    </a>

    <div class="hc-nav__links" aria-label="Primary navigation">
      {% assign current_path = request.path | default: '/' | downcase %}
      {% for item in nav_links %}
        {% assign parts = item | split: '=>' %}
        {% assign label = parts[0] | strip %}
        {% assign url = parts[1] | strip | default: '/' %}
        <a class="hc-nav__link" href="{{ url }}" data-evt="nav_link_{{ label | handle }}">{{ label }}</a>
      {% endfor %}
    </div>

    <div class="hc-nav__actions">
      {% if current_site_user %}
        <a class="hc-nav__avatar" href="/library" data-evt="{{ profile_event }}">
          {% assign avatar_url = current_site_user | avatar_url %}
          {% if avatar_url %}
            <img src="{{ avatar_url }}" alt="{{ current_site_user.name | default: 'Account' }}" style="width:100%;height:100%;object-fit:cover;display:block"/>
          {% else %}
            {{ profile_label | slice: 0, 1 | upcase }}
          {% endif %}
        </a>
      {% else %}
        <a class="hc-nav__avatar" href="{{ login_url }}" data-evt="{{ profile_event }}" aria-label="Login">L</a>
      {% endif %}
      <a class="hc-nav__cta" href="{{ cta_url }}" data-evt="nav_cta">{{ cta_label }}</a>
    </div>

    <button class="hc-nav__toggle" type="button" aria-label="Toggle navigation" aria-expanded="false" data-hc-toggle>
      <span></span><span></span><span></span>
    </button>
  </div>

  <div class="hc-nav__drawer" role="dialog" aria-modal="true" aria-label="Mobile navigation" data-hc-drawer>
    {% for item in nav_links %}
      {% assign parts = item | split: '=>' %}
      {% assign label = parts[0] | strip %}
      {% assign url = parts[1] | strip | default: '/' %}
      <a href="{{ url }}" data-evt="nav_link_mobile_{{ label | handle }}">{{ label }}</a>
    {% endfor %}
    <a class="hc-nav__cta" href="{{ cta_url }}" data-evt="nav_cta_mobile">{{ cta_label }}</a>
    <a class="hc-nav__avatar" href="{{ login_url }}" data-evt="{{ profile_event }}">{{ profile_label }}</a>
  </div>
</nav>

<script>
  (function(){
    var nav=document.querySelector('.hc-nav');
    if(!nav) return;
    var t=nav.querySelector('[data-hc-toggle]');
    var d=nav.querySelector('[data-hc-drawer]');
    if(!t||!d) return;
    function close(){nav.classList.remove('is-open');t.setAttribute('aria-expanded','false');}
    t.addEventListener('click',function(){var o=nav.classList.toggle('is-open');t.setAttribute('aria-expanded',o?'true':'false');});
    d.querySelectorAll('a').forEach(function(a){a.addEventListener('click',close)});
    document.addEventListener('keyup',function(e){if(e.key==='Escape') close();});
  })();
</script>

