{% comment %}
  Library Event Card
  - Gradient card with eyebrow "Next live session"
  - Title, date/time, description, remaining spots
  - Two CTA buttons with icons
  - Highly configurable for reuse across events, workshops, etc.
{% endcomment %}

<section id="{{ section.settings.section_id | default: 'library-event-card' }}-{{ section.id }}" class="library-event-card" style="padding: {{ section.settings.section_padding_y }}px 0;">
  <div class="container">
    <div class="lec-wrapper"
         style="
           background: {% if section.settings.bg_type == 'gradient' %}linear-gradient({{ section.settings.gradient_angle }}deg, {{ section.settings.gradient_from }} 0%, {{ section.settings.gradient_to }} 100%){% else %}{{ section.settings.bg_color }}{% endif %};
           border-radius: {{ section.settings.card_radius }}px;
           padding: {{ section.settings.card_padding }}px;
           box-shadow: {% if section.settings.card_shadow %}0 8px 28px rgba(0,0,0,0.12){% else %}none{% endif %};
         ">
      <div class="lec-grid">
        <div class="lec-content" style="text-align: {{ section.settings.text_align }}; max-width: {{ section.settings.max_width }}px; margin: 0 auto;">
          {% if section.settings.eyebrow != blank %}
            <div class="lec-eyebrow" style="color: {{ section.settings.eyebrow_color }};">
              {% if section.settings.eyebrow_dot %}<span class="lec-dot" style="background: {{ section.settings.dot_color }};"></span>{% endif %}
              <span kjb-settings-id="{{ 'eyebrow' | settings_id: section: section }}">{{ section.settings.eyebrow }}</span>
            </div>
          {% endif %}

          {% if section.settings.title != blank %}
            <h2 class="lec-title" kjb-settings-id="{{ 'title' | settings_id: section: section }}" style="color: {{ section.settings.title_color }}; font-size: {{ section.settings.title_size }}px;">
              {{ section.settings.title }}
            </h2>
          {% endif %}

          {% if section.settings.datetime_text != blank %}
            <div class="lec-datetime" kjb-settings-id="{{ 'datetime_text' | settings_id: section: section }}" style="color: {{ section.settings.datetime_color }};">
              {{ section.settings.datetime_text }}
            </div>
          {% endif %}

          {% if section.settings.description != blank %}
            <p class="lec-desc" kjb-settings-id="{{ 'description' | settings_id: section: section }}" style="color: {{ section.settings.description_color }};">
              {{ section.settings.description }}
            </p>
          {% endif %}

          {% if section.settings.spots_text != blank %}
            <div class="lec-spots" kjb-settings-id="{{ 'spots_text' | settings_id: section: section }}" style="color: {{ section.settings.spots_color }};">{{ section.settings.spots_text }}</div>
          {% endif %}

          <div class="lec-actions">
            {% for block in section.blocks %}
              {% case block.type %}
                {% when 'button' %}
                  <a href="{{ block.settings.link }}"
                     class="lec-btn {% if block.settings.style == 'primary' %}lec-btn-primary{% else %}lec-btn-secondary{% endif %}"
                     {% if block.settings.new_tab %}target="_blank" rel="noopener"{% endif %}
                     kjb-settings-id="{{ 'text' | settings_id: section: section, block: block }}"
                     style="border-radius: {{ section.settings.button_radius }}px;">
                    {% if block.settings.icon == 'calendar' %}
                      <span class="lec-icon" aria-hidden="true">ðŸ“…</span>
                    {% elsif block.settings.icon == 'chat' %}
                      <span class="lec-icon" aria-hidden="true">ðŸ’¬</span>
                    {% endif %}
                    {{ block.settings.text }}
                  </a>
              {% endcase %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .library-event-card .lec-wrapper { position: relative; overflow: hidden; }
  .library-event-card .lec-grid { display: block; }
  .library-event-card .lec-eyebrow {
    font-size: var(--fs-caption);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: .04em;
    margin-bottom: 8px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
  }
  .library-event-card .lec-dot { width: 8px; height: 8px; border-radius: 999px; display: inline-block; }
  .library-event-card .lec-title { line-height: 1.2; margin: 0 0 8px; }
  .library-event-card .lec-datetime { font-weight: 600; margin-bottom: 12px; }
  .library-event-card .lec-desc { font-size: var(--fs-body); margin: 0 0 12px; }
  .library-event-card .lec-spots { font-size: var(--fs-caption); opacity: .9; margin-bottom: 20px; }
  .library-event-card .lec-actions { display: flex; flex-wrap: wrap; gap: 12px; }
  .library-event-card .lec-btn { display: inline-flex; align-items: center; gap: 10px; padding: 12px 20px; text-decoration: none; font-weight: 600; }
  .library-event-card .lec-btn-primary { background: {{ section.settings.primary_btn_bg }}; color: {{ section.settings.primary_btn_text }} !important; border: none; }
  .library-event-card .lec-btn-secondary { background: transparent; color: {{ section.settings.secondary_btn_text }} !important; border: 2px solid {{ section.settings.secondary_btn_border }}; }
  .library-event-card .lec-btn:hover { transform: translateY(-1px); transition: transform .15s ease; }
  @media (max-width: 768px) {
    .library-event-card .lec-title { font-size: calc({{ section.settings.title_size }}px - 6px); }
    .library-event-card .lec-actions { flex-direction: column; }
  }
</style>

{% schema %}
{
  "name": "Library - Event Card",
  "elements": [
    { "type": "header", "content": "General" },
    { "type": "text", "id": "section_id", "label": "Section ID", "default": "library-event-card" },
    { "type": "range", "id": "section_padding_y", "label": "Section vertical padding", "min": 16, "max": 120, "step": 4, "unit": "px", "default": 40 },

    { "type": "header", "content": "Card Background" },
    { "type": "select", "id": "bg_type", "label": "Background Type", "default": "gradient", "options": [
      { "label": "Gradient", "value": "gradient" },
      { "label": "Solid", "value": "solid" }
    ]},
    { "type": "color", "id": "bg_color", "label": "Solid Color", "default": "#0CCAD4" },
    { "type": "color", "id": "gradient_from", "label": "Gradient From", "default": "#3E86F5" },
    { "type": "color", "id": "gradient_to", "label": "Gradient To", "default": "#12D6D6" },
    { "type": "range", "id": "gradient_angle", "label": "Gradient Angle", "min": 0, "max": 360, "step": 5, "unit": "deg", "default": 135 },
    { "type": "range", "id": "card_radius", "label": "Card Radius", "min": 0, "max": 36, "step": 2, "unit": "px", "default": 16 },
    { "type": "range", "id": "card_padding", "label": "Card Padding", "min": 16, "max": 80, "step": 4, "unit": "px", "default": 28 },
    { "type": "checkbox", "id": "card_shadow", "label": "Card Shadow", "default": true },

    { "type": "header", "content": "Content" },
    { "type": "text", "id": "eyebrow", "label": "Eyebrow", "default": "Next live session" },
    { "type": "checkbox", "id": "eyebrow_dot", "label": "Show status dot", "default": true },
    { "type": "color", "id": "dot_color", "label": "Dot color", "default": "#FF6B6B" },
    { "type": "color", "id": "eyebrow_color", "label": "Eyebrow color", "default": "#FFFFFF" },
    { "type": "text", "id": "title", "label": "Title", "default": "Live Q&A with Eli" },
    { "type": "range", "id": "title_size", "label": "Title size", "min": 20, "max": 60, "step": 2, "unit": "px", "default": 32 },
    { "type": "color", "id": "title_color", "label": "Title color", "default": "#FFFFFF" },
    { "type": "text", "id": "datetime_text", "label": "Date / Time", "default": "Thursday, Jan 9 at 8:00 PM ET" },
    { "type": "color", "id": "datetime_color", "label": "Date/Time color", "default": "#FFFFFF" },
    { "type": "textarea", "id": "description", "label": "Description", "default": "Bring your real-life moments for personalized guidance" },
    { "type": "color", "id": "description_color", "label": "Description color", "default": "#FFFFFF" },
    { "type": "text", "id": "spots_text", "label": "Spots text", "default": "23 spots remaining" },
    { "type": "color", "id": "spots_color", "label": "Spots color", "default": "#FFFFFF" },

    { "type": "header", "content": "Layout" },
    { "type": "select", "id": "text_align", "label": "Text alignment", "default": "left", "options": [
      { "label": "Left", "value": "left" },
      { "label": "Center", "value": "center" },
      { "label": "Right", "value": "right" }
    ]},
    { "type": "range", "id": "max_width", "label": "Max content width", "min": 480, "max": 1200, "step": 20, "unit": "px", "default": 900 },

    { "type": "header", "content": "Buttons" },
    { "type": "range", "id": "button_radius", "label": "Button radius", "min": 0, "max": 999, "step": 1, "unit": "px", "default": 999 },
    { "type": "color", "id": "primary_btn_bg", "label": "Primary background", "default": "#FFFFFF" },
    { "type": "color", "id": "primary_btn_text", "label": "Primary text", "default": "#0F172A" },
    { "type": "color", "id": "secondary_btn_text", "label": "Secondary text", "default": "#FFFFFF" },
    { "type": "color", "id": "secondary_btn_border", "label": "Secondary border", "default": "rgba(255,255,255,.8)" }
  ],
  "blocks": [
    {
      "type": "button",
      "name": "Button",
      "limit": 2,
      "elements": [
        { "type": "text", "id": "text", "label": "Text", "default": "Add to Calendar" },
        { "type": "action", "id": "link", "label": "Link", "anchor": true, "two_step": true },
        { "type": "radio", "id": "style", "label": "Style", "default": "primary", "options": [ {"label":"Primary","value":"primary"}, {"label":"Secondary","value":"secondary"} ] },
        { "type": "select", "id": "icon", "label": "Icon", "default": "calendar", "options": [
          { "label": "Calendar", "value": "calendar" },
          { "label": "Chat", "value": "chat" },
          { "label": "None", "value": "none" }
        ] },
        { "type": "checkbox", "id": "new_tab", "label": "Open in new tab", "default": false }
      ]
    }
  ],
  "presets": [
    {
      "name": "Library - Event Card",
      "category": "Library",
      "blocks": [
        { "type": "button", "settings": { "text": "Add to Calendar", "style": "primary", "icon": "calendar" } },
        { "type": "button", "settings": { "text": "Submit Question", "style": "secondary", "icon": "chat" } }
      ]
    }
  ]
}
{% endschema %}


