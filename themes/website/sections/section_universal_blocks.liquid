{% comment %}
  Universal - Blocks Section
  - Lets you add many common block_* snippets as builder blocks
  - Each block renders its corresponding snippet (block_*)
  - Snippets read values from block.settings; if a field is absent it defaults/empties
  - Start here; we can extend individual block schemas later as needed
{% endcomment %}

<section id="{{ section.settings.section_id | default: 'universal-blocks' }}-{{ section.id }}"
  class="section section--global section--universal-blocks"
  {% if section.settings.background_color != blank %}
    kjb-settings-id="{{ 'background_color' | settings_id: section: section }}"
    class="section section--global section--universal-blocks background-{{ section.settings.background_color | color_scheme_class }}"
  {% endif %}>
  <div class="container" style="padding: {{ section.settings.padding_y | default: 24 }}px 0;">
    <div class="row section__row">
      <div class="section__body col-lg-12">
        {% if section.blocks.size == 0 %}
          <div class="ub-empty">Add blocks to render snippets.</div>
        {% endif %}
        {% for block in section.blocks %}
          <div id="block-{{ block.id }}" class="ub-item">
            {% case block.type %}
              {% when 'accordion' %}
                {% include "block_accordion" %}
              {% when 'audio' %}
                {% include "block_audio" %}
              {% when 'blog' %}
                {% include "block_blog" %}
              {% when 'card' %}
                {% include "block_card" %}
              {% when 'code' %}
                {% include "block_code" %}
              {% when 'coaching_scheduling_widget' %}
                {% include "block_coaching_scheduling_widget" %}
              {% when 'countdown' %}
                {% include "block_countdown" %}
              {% when 'cta' %}
                {% include "block_cta" %}
              {% when 'event' %}
                {% include "block_event" %}
              {% when 'event_video' %}
                {% include "block_event_video" %}
              {% when 'external_widget' %}
                {% include "block_external_widget" %}
              {% when 'feature' %}
                {% include "block_feature" %}
              {% when 'form' %}
                {% include "block_form" %}
              {% when 'image' %}
                {% include "block_image" %}
              {% when 'link_list' %}
                {% include "block_link_list" %}
              {% when 'login' %}
                {% include "block_login" %}
              {% when 'multi_video' %}
                {% include "block_multi_video" %}
              {% when 'offer' %}
                {% include "block_offer" %}
              {% when 'password_edit' %}
                {% include "block_password_edit" %}
              {% when 'password_reset' %}
                {% include "block_password_reset" %}
              {% when 'pricing' %}
                {% include "block_pricing" %}
              {% when 'social_icons' %}
                {% include "block_social_icons" %}
              {% when 'social_share' %}
                {% include "block_social_share" %}
              {% when 'styles' %}
                {% include "block_styles" %}
              {% when 'text' %}
                {% include "block_text" %}
              {% when 'video' %}
                {% include "block_video" %}
              {% when 'video_embed' %}
                {% include "block_video_embed" %}
              {% else %}
                <div class="ub-unknown">Unsupported block type: {{ block.type }}</div>
            {% endcase %}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<style>
  .section--universal-blocks .ub-item { margin-bottom: 24px; }
  .section--universal-blocks .ub-empty { opacity: .6; font-style: italic; }
</style>

{% schema %}
{
  "name": "Universal - Blocks",
  "elements": [
    { "type": "text", "id": "section_id", "label": "Section ID", "default": "universal-blocks" },
    { "type": "range", "id": "padding_y", "label": "Section Padding Y", "min": 0, "max": 80, "step": 4, "unit": "px", "default": 24 },
    { "type": "color", "id": "background_color", "label": "Background Color", "allow_blank": true }
  ],
  "blocks": [
    { "type": "accordion", "name": "Accordion" },
    { "type": "audio", "name": "Audio" },
    { "type": "blog", "name": "Blog" },
    { "type": "card", "name": "Card" },
    { "type": "code", "name": "Code" },
    { "type": "coaching_scheduling_widget", "name": "Coaching Scheduler" },
    { "type": "countdown", "name": "Countdown" },
    { "type": "cta", "name": "CTA" },
    { "type": "event", "name": "Event" },
    { "type": "event_video", "name": "Event Video" },
    { "type": "external_widget", "name": "External Widget" },
    { "type": "feature", "name": "Feature" },
    {
      "type": "form",
      "name": "Form",
      "elements": [
        { "type": "text", "id": "text", "label": "Intro Text", "default": "" },
        { "type": "checkbox", "id": "inline", "label": "Inline layout (<=3 fields)", "default": false },
        { "type": "form", "id": "form", "label": "Kajabi Form" },
        { "type": "text", "id": "manual_form_id", "label": "Manual Form ID" },
        { "type": "select", "id": "success_type", "label": "Success Action", "default": "message", "options": [
          { "value": "message", "label": "Show Success Message" },
          { "value": "redirect", "label": "Redirect to URL" }
        ] },
        { "type": "rich_text", "id": "success_html", "label": "Success Message (HTML)", "default": "<p>Thank you! Your submission has been received.</p>" },
        { "type": "action", "id": "thank_you", "label": "Thank You URL (for redirect)", "allow_blank": true },
        { "type": "checkbox", "id": "thank_you_new_tab", "label": "Open Thank You URL in new tab", "default": false },
        { "type": "text", "id": "btn_text", "label": "Button Text", "default": "Submit" },
        { "type": "text", "id": "loading_text", "label": "Loading Text", "default": "Processing..." },
        { "type": "select", "id": "btn_style", "label": "Button Style", "default": "solid", "options": [
          { "value": "solid", "label": "Solid" },
          { "value": "outline", "label": "Outline" }
        ] },
        { "type": "select", "id": "btn_size", "label": "Button Size", "default": "medium", "options": [
          { "value": "small", "label": "Small" },
          { "value": "medium", "label": "Medium" },
          { "value": "large", "label": "Large" }
        ] },
        { "type": "select", "id": "btn_width", "label": "Button Width", "default": "auto", "options": [
          { "value": "auto", "label": "Auto" },
          { "value": "full", "label": "Full" }
        ] },
        { "type": "text", "id": "btn_background_color", "label": "Button Background Color" },
        { "type": "text", "id": "btn_bg_hover_color", "label": "Button Background Hover Color" },
        { "type": "text", "id": "btn_text_color", "label": "Button Text Color" },
        { "type": "text", "id": "btn_text_hover_color", "label": "Button Text Hover Color" },
        { "type": "range", "id": "btn_border_radius", "label": "Button Border Radius", "min": 0, "max": 50, "step": 1, "unit": "px", "default": 50 },
        { "type": "checkbox", "id": "hide_email_when_logged_in", "label": "Hide email when logged in", "default": true },
        { "type": "checkbox", "id": "autofill_names_when_logged_in", "label": "Auto-fill first/last name when logged in", "default": true },
        { "type": "text", "id": "success_message", "label": "Success Message", "default": "Success! Your submission has been received." },
        { "type": "textarea", "id": "disclaimer_text", "label": "Disclaimer Text" },
        { "type": "text", "id": "disclaimer_text_color", "label": "Disclaimer Text Color" }
      ]
    },
    { "type": "image", "name": "Image" },
    { "type": "link_list", "name": "Link List" },
    { "type": "login", "name": "Login" },
    { "type": "multi_video", "name": "Multi Video" },
    { "type": "offer", "name": "Offer" },
    { "type": "password_edit", "name": "Password Edit" },
    { "type": "password_reset", "name": "Password Reset" },
    { "type": "pricing", "name": "Pricing" },
    { "type": "social_icons", "name": "Social Icons" },
    { "type": "social_share", "name": "Social Share" },
    { "type": "styles", "name": "Styles" },
    { "type": "text", "name": "Text" },
    { "type": "video", "name": "Video" },
    { "type": "video_embed", "name": "Video Embed" }
  ],
  "presets": [
    { "name": "Universal - Blocks", "category": "Layout" }
  ]
}
{% endschema %}



