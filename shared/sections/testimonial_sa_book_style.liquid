<section class="sa-testimonials py-5">
  <div class="container">
    <div class="text-center mb-5 animate-fade-up">
      <h2 class="mb-3" style="font-size: var(--fs-h1); color: var(--c-ink-900); font-weight: 500;" kjb-settings-id="{{ 'heading' | settings_id: section: section }}">
        {{ section.settings.heading | default: 'Praise for Securely Attached' }}
      </h2>
    </div>
    
    <!-- Featured testimonial -->
    {% for block in section.blocks %}
      {% if block.type == 'testimonial' and block.settings.featured == true %}
        <div class="mb-5">
          <div class="card-modern p-5 text-center animate-fade-up" style="background: var(--c-brand-100); border: none;">
            <div class="mb-4">
              {% for i in (1..5) %}
                <svg width="20" height="20" viewBox="0 0 24 24" fill="var(--c-accent-lemon)" style="margin: 0 2px;">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
              {% endfor %}
            </div>
            
            <blockquote class="mb-4" style="font-size: var(--fs-body-lg); color: var(--c-ink-800); font-style: italic; max-width: 800px; margin: 0 auto;" kjb-settings-id="{{ 'quote' | settings_id: section: section, block: block }}">
              "{{ block.settings.quote }}"
            </blockquote>
            
            <div class="d-flex align-items-center justify-content-center">
              {% if block.settings.author_image %}
                <div kjb-settings-id="{{ '>
  <img src="{{ block.settings.author_image | image_picker_url: '120x120' }}" 
             alt="{{ {{ block.settings.author }} }}" 
             class="rounded-circle me-3"
             loading="lazy"
             style="object-fit: cover;">
</div>
              {% else %}
                <div class="rounded-circle me-3 d-flex align-items-center justify-content-center" 
                     style="width: 56px; height: 56px; background: linear-gradient(135deg, var(--c-brand-600) 0%, var(--c-brand-800) 100%); color: white; font-weight: 600;">
                  {{ block.settings.author | slice: 0 | upcase }}
                </div>
              {% endif %}
              <div>
                <p class="mb-1" style="font-weight: 600; color: var(--c-ink-900);" kjb-settings-id="{{ 'author' | settings_id: section: section, block: block }}">
                  {{ block.settings.author }}
                </p>
                <p class="mb-0" style="font-size: 14px; color: var(--c-ink-600);" kjb-settings-id="{{ 'credentials' | settings_id: section: section, block: block }}">
                  {{ block.settings.credentials }}
                </p>
              </div>
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
    
    <!-- Regular testimonials grid -->
    <div class="row g-4">
      {% assign non_featured_index = 0 %}
      {% for block in section.blocks %}
        {% if block.type == 'testimonial' and block.settings.featured != true %}
          {% assign non_featured_index = non_featured_index | plus: 1 %}
          <div class="col-lg-6">
            <div class="card-modern h-100 p-4 animate-fade-up" style="animation-delay: {{ non_featured_index | times: 0.1 }}s;">
              <div class="mb-3">
                {% for i in (1..5) %}
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="var(--c-accent-lemon)">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                {% endfor %}
              </div>
              
              <blockquote class="mb-3" style="color: var(--c-ink-700); font-style: italic; line-height: 1.6;" kjb-settings-id="{{ 'quote' | settings_id: section: section, block: block }}">
                "{{ block.settings.quote }}"
              </blockquote>
              
              <div class="d-flex align-items-center">
                {% if block.settings.author_image %}
                  <div kjb-settings-id="{{ '>
  <img src="{{ block.settings.author_image | image_picker_url: '120x120' }}" 
             alt="{{ {{ block.settings.author }} }}" 
             class="rounded-circle me-2"
             loading="lazy"
             style="object-fit: cover;">
</div>
                {% else %}
                  <div class="rounded-circle me-2 d-flex align-items-center justify-content-center" 
                       style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--c-accent-teal) 0%, var(--c-brand-600) 100%); color: white; font-size: 14px; font-weight: 600;">
                    {{ block.settings.author | slice: 0 | upcase }}
                  </div>
                {% endif %}
                <div>
                  <p class="mb-0" style="font-weight: 600; color: var(--c-ink-900); font-size: 14px;" kjb-settings-id="{{ 'author' | settings_id: section: section, block: block }}">
                    {{ block.settings.author }}
                  </p>
                  <p class="mb-0" style="font-size: 13px; color: var(--c-ink-600);" kjb-settings-id="{{ 'credentials' | settings_id: section: section, block: block }}">
                    {{ block.settings.credentials }}
                  </p>
                </div>
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
    
    <!-- Reader stats -->
    {% if section.settings.show_stats %}
      <div class="mt-5 pt-5" style="border-top: 1px solid var(--c-ink-100);">
        <div class="row text-center g-4">
          <div class="col-md-4 animate-fade-up" style="animation-delay: 0.1s;">
            <h3 class="mb-1" style="font-size: var(--fs-h1); color: var(--c-brand-600); font-weight: 600;">
              {{ section.settings.stat_1_number | default: '4.8/5' }}
            </h3>
            <p class="mb-0" style="color: var(--c-ink-600);">
              {{ section.settings.stat_1_label | default: 'Average Rating' }}
            </p>
          </div>
          <div class="col-md-4 animate-fade-up" style="animation-delay: 0.2s;">
            <h3 class="mb-1" style="font-size: var(--fs-h1); color: var(--c-brand-600); font-weight: 600;">
              {{ section.settings.stat_2_number | default: '10,000+' }}
            </h3>
            <p class="mb-0" style="color: var(--c-ink-600);">
              {{ section.settings.stat_2_label | default: 'Happy Readers' }}
            </p>
          </div>
          <div class="col-md-4 animate-fade-up" style="animation-delay: 0.3s;">
            <h3 class="mb-1" style="font-size: var(--fs-h1); color: var(--c-brand-600); font-weight: 600;">
              {{ section.settings.stat_3_number | default: '140' }}
            </h3>
            <p class="mb-0" style="color: var(--c-ink-600);">
              {{ section.settings.stat_3_label | default: 'Transformative Prompts' }}
            </p>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Testimonial - SA Book Style",
  "elements": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Praise for Securely Attached"
    },
    {
      "type": "checkbox",
      "id": "show_stats",
      "label": "Show Statistics",
      "default": true
    },
    {
      "type": "text",
      "id": "stat_1_number",
      "label": "Statistic 1 Number"
    },
    {
      "type": "text",
      "id": "stat_1_label",
      "label": "Statistic 1 Label"
    },
    {
      "type": "text",
      "id": "stat_2_number",
      "label": "Statistic 2 Number"
    },
    {
      "type": "text",
      "id": "stat_2_label",
      "label": "Statistic 2 Label"
    },
    {
      "type": "text",
      "id": "stat_3_number",
      "label": "Statistic 3 Number"
    },
    {
      "type": "text",
      "id": "stat_3_label",
      "label": "Statistic 3 Label"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "elements": [
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author Name"
        },
        {
          "type": "text",
          "id": "credentials",
          "label": "Author Credentials"
        },
        {
          "type": "image_picker",
          "id": "author_image",
          "label": "Author Photo"
        },
        {
          "type": "checkbox",
          "id": "featured",
          "label": "Featured Testimonial",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonial - SA Book Style",
      "category": "Content",
      "blocks": [
        {
          "type": "testimonial",
          "settings": {
            "quote": "Securely Attached is a resource that every therapist, client, and person needs in their life. Eli hands us her clear knowledge of the attachment research in a way that is engaging, concise, and hopeful towards healing attachment wounds and learning how to cultivate secure bonds with the people who matter most in our lives.",
            "author": "Dr. Nicole LePera",
            "credentials": "New York Times-bestselling author of How to Do the Work",
            "featured": true
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "Transforming our attachment patterns is a transformative journey, and Eli Harwood's book, Securely Attached, is a guiding light on this path of self-discovery and growth. With a blend of expertise, compassion, and personal experience, Eli empowers adults with insecure attachment styles to forge deeply satisfying and secure relationships.",
            "author": "Jessica Baum, LMHC",
            "credentials": "Author of Anxiously Attached: Becoming More Secure in Life and Love",
            "featured": false
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "This visually engaging, humor-infused workbook guides insecurely attached readers on a journey of self-discovery. Harwood gently provides clear explanations of attachment-related concepts readers can apply to their lives through thought-provoking exercises. The result is an amazing opportunity to nurture secure attachment and enjoy emotionally intimate relationships.",
            "author": "Leslie Becker-Phelps, PhD",
            "credentials": "Author of Insecure in Love and Insecure in Love Workbook",
            "featured": false
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "You have decided to embark on a worthy and challenging endeavor by engaging this book. You're in good hands! Eli is going to give you the brainy stuff of how early relationships create patterns in our lives. She is not just an academic or clinical expert worthy of a follow on social media. She is your ally. She has lived what she has written in this book, and she is cheering you on.",
            "author": "Abby Wong-Heffter, LMHC",
            "credentials": "Trauma and abuse therapist specializing in attachment theory",
            "featured": false
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "An important, user-friendly guide to understanding and transforming attachment patterns.",
            "author": "Alan Sroufe",
            "credentials": "Professor Emeritus, University of Minnesota",
            "featured": false
          }
        }
      ]
    }
  ]
}
{% endschema %}