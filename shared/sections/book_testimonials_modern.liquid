<!-- Book Testimonials Section - Modern Card Design -->
<section class="testimonials-modern py-5" style="background-color: #FAFAFA;">
  <div class="container">
    {% if section.settings.heading %}
      <div class="text-center mb-5 animate-fade-up">
        <h3 style="font-size: var(--fs-h1); font-weight: 500; color: var(--c-ink-900);" kjb-settings-id="{{ 'heading' | settings_id: section: section }}">
          {{ section.settings.heading }}
        </h3>
        {% if section.settings.subheading %}
          <p class="mt-2" style="font-size: var(--fs-body-lg); color: var(--c-ink-500);" kjb-settings-id="{{ 'subheading' | settings_id: section: section }}">
            {{ section.settings.subheading }}
          </p>
        {% endif %}
      </div>
    {% endif %}
    
    <div class="row g-4">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'testimonial' %}
            <div class="col-lg-{{ section.settings.columns }} mb-4">
              <div class="testimonial-card h-100 animate-fade-up" style="animation-delay: {{ forloop.index0 | times: 0.1 }}s;">
                <div class="card-inner h-100" style="background: var(--c-white); border-radius: 16px; padding: 32px; box-shadow: 0 4px 12px rgba(0,0,0,.05); transition: all 0.3s ease;">
                  <!-- Header with icon -->
                  <div class="card-header mb-3 d-flex align-items-center justify-content-between">
                    <div style="width: 32px; height: 32px; background: var(--c-brand-600); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                      <span style="color: var(--c-white); font-size: 18px;">{{ block.settings.icon | default: 'ðŸ’¬' }}</span>
                    </div>
                    {% if block.settings.show_stars %}
                      <div class="stars">
                        <span style="color: var(--c-accent-lemon); font-size: 1.2rem;">â˜…â˜…â˜…â˜…â˜…</span>
                      </div>
                    {% endif %}
                  </div>
                  
                  <!-- Quote -->
                  <p class="mb-4 testimonial-quote" style="font-size: var(--fs-body); color: var(--c-ink-700); line-height: 1.6; font-style: italic; font-family: var(--font-serif); letter-spacing: -0.01em;" kjb-settings-id="{{ 'quote' | settings_id: section: section, block: block }}">
                    "{{ block.settings.quote }}"
                  </p>
                  
                  <!-- Author -->
                  <div class="card-footer mt-auto d-flex align-items-center">
                    {% if block.settings.author_image %}
                      <img src="{{ block.settings.author_image | image_picker_url: 'avatar-placeholder.png' }}" 
                           alt="{{ block.settings.author_name }}" 
                           class="me-3"
                           width="48"
                           height="48"
                           loading="lazy"
                           style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover;"
                           kjb-settings-id="{{ 'author_image' | settings_id: section: section, block: block }}">
                    {% endif %}
                    <div>
                      <p class="mb-0" style="font-weight: 500; color: var(--c-ink-900);" kjb-settings-id="{{ 'author_name' | settings_id: section: section, block: block }}">
                        {{ block.settings.author_name }}
                      </p>
                      <p class="mb-0" style="font-size: var(--fs-caption); color: var(--c-ink-500);" kjb-settings-id="{{ 'author_title' | settings_id: section: section, block: block }}">
                        {{ block.settings.author_title }}
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
    
    <!-- Trust stats -->
    {% if section.settings.show_stats %}
      <div class="trust-stats text-center mt-5 animate-fade-up">
        <div class="row g-4 justify-content-center">
          <div class="col-auto">
            <div class="stat-item">
              <h4 style="font-size: var(--fs-h2); font-weight: 500; color: var(--c-brand-600); margin-bottom: 4px;">
                {{ section.settings.stat_1_number }}
              </h4>
              <p style="font-size: var(--fs-caption); color: var(--c-ink-500); margin: 0;">
                {{ section.settings.stat_1_label }}
              </p>
            </div>
          </div>
          <div class="col-auto">
            <div class="stat-item">
              <h4 style="font-size: var(--fs-h2); font-weight: 500; color: var(--c-brand-600); margin-bottom: 4px;">
                {{ section.settings.stat_2_number }}
              </h4>
              <p style="font-size: var(--fs-caption); color: var(--c-ink-500); margin: 0;">
                {{ section.settings.stat_2_label }}
              </p>
            </div>
          </div>
          <div class="col-auto">
            <div class="stat-item">
              <h4 style="font-size: var(--fs-h2); font-weight: 500; color: var(--c-brand-600); margin-bottom: 4px;">
                {{ section.settings.stat_3_number }}
              </h4>
              <p style="font-size: var(--fs-caption); color: var(--c-ink-500); margin: 0;">
                {{ section.settings.stat_3_label }}
              </p>
            </div>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
</section>

<style>
/* Testimonial card hover effects */
.testimonial-card .card-inner:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0,0,0,.08), 0 0 0 1px var(--c-brand-100);
}

/* Stat items */
.stat-item {
  padding: 0 24px;
  position: relative;
}

.stat-item:not(:last-child)::after {
  content: '';
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 1px;
  height: 40px;
  background: var(--c-brand-100);
}

/* Animations */
.animate-fade-up {
  animation: fadeUp 0.6s ease-out both;
}

@media (max-width: 767px) {
  .stat-item::after {
    display: none;
  }
}
</style>

{% schema %}
{
  "name": "Book - Testimonials Modern",
  "elements": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Loved by Parents & Experts"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "See what readers are saying about our books"
    },
    {
      "type": "select",
      "id": "columns",
      "label": "Columns per Row",
      "default": "4",
      "options": [
        {
          "value": "12",
          "label": "1 Column"
        },
        {
          "value": "6",
          "label": "2 Columns"
        },
        {
          "value": "4",
          "label": "3 Columns"
        },
        {
          "value": "3",
          "label": "4 Columns"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "show_stats",
      "label": "Show Trust Statistics",
      "default": true
    },
    {
      "type": "text",
      "id": "stat_1_number",
      "label": "Stat 1 Number",
      "default": "50,000+"
    },
    {
      "type": "text",
      "id": "stat_1_label",
      "label": "Stat 1 Label",
      "default": "Happy Readers"
    },
    {
      "type": "text",
      "id": "stat_2_number",
      "label": "Stat 2 Number",
      "default": "4.8/5"
    },
    {
      "type": "text",
      "id": "stat_2_label",
      "label": "Stat 2 Label",
      "default": "Average Rating"
    },
    {
      "type": "text",
      "id": "stat_3_number",
      "label": "Stat 3 Number",
      "default": "15+"
    },
    {
      "type": "text",
      "id": "stat_3_label",
      "label": "Stat 3 Label",
      "default": "Awards Won"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "elements": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icon Emoji",
          "default": "ðŸ’¬"
        },
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote",
          "default": "This book transformed how I parent!"
        },
        {
          "type": "text",
          "id": "author_name",
          "label": "Author Name",
          "default": "Sarah M."
        },
        {
          "type": "text",
          "id": "author_title",
          "label": "Author Title/Details",
          "default": "Mother of Two"
        },
        {
          "type": "image_picker",
          "id": "author_image",
          "label": "Author Photo"
        },
        {
          "type": "checkbox",
          "id": "show_stars",
          "label": "Show 5-Star Rating",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Book Testimonials - Modern",
      "category": "Content",
      "blocks": [
        {
          "type": "testimonial",
          "settings": {
            "icon": "ðŸ“š",
            "quote": "Eli Harwood teaches the essentials of attachment, which can help parents 'show up' in ways that enable our children to become securely attached to us.",
            "author_name": "Dr. Daniel J. Siegel, M.D.",
            "author_title": "Co-author, The Whole-Brain Child",
            "show_stars": true
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "icon": "ðŸŒŸ",
            "quote": "A comprehensive roadmap for parents who want to raise securely attached, emotionally healthy children. A parenting must-read.",
            "author_name": "Alyssa Blask Campbell",
            "author_title": "Author, Tiny Humans, Big Emotions",
            "show_stars": true
          }
        },
        {
          "type": "testimonial",
          "settings": {
            "icon": "ðŸ’–",
            "quote": "There is truly nothing that matters more to me in my life than building secure relationships with my children and loved ones.",
            "author_name": "Hilary Swank",
            "author_title": "Actress, Mom of Twins",
            "show_stars": true
          }
        }
      ],
      "settings": {
        "heading": "Loved by Parents & Experts",
        "subheading": "See what readers are saying about our books",
        "columns": "4",
        "show_stats": true,
        "stat_1_number": "50,000+",
        "stat_1_label": "Happy Readers",
        "stat_2_number": "4.8/5",
        "stat_2_label": "Average Rating",
        "stat_3_number": "15+",
        "stat_3_label": "Awards Won"
      }
    }
  ]
}
{% endschema %}