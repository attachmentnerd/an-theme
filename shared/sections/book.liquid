{% comment %} Book Section - Website Theme {% endcomment %}
<div class="section section--book" id="section-{{ section.id }}">
  <div class="container">
    
    {% comment %} Top Text {% endcomment %}
    {% if section.settings.top_text != blank %}
      <div class="book__top-text">
        {{ section.settings.top_text }}
      </div>
    {% endif %}
    
    {% comment %} Logo Row {% endcomment %}
    <div class="book__logos">
      {% for block in section.blocks %}
        {% if block.type == 'logo' %}
          <div class="book__logo" {{ block.shopify_attributes }}>
            {% if block.settings.logo_image != blank %}
              {% render 'responsive-image',
                image: block.settings.logo_image,
                alt: block.settings.logo_alt_text | default: 'Logo',
                sizes: '(max-width: 575px) 120px, 150px',
                widths: '120,150,240,300',
                loading: 'lazy'
              %}
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
    
    {% comment %} Main Content {% endcomment %}
    <div class="book__content">
      
      {% comment %} Left Quote {% endcomment %}
      <div class="book__quote book__quote--left">
        <div class="book__stars">
          {% for i in (1..5) %}
            <svg class="book__star" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/>
            </svg>
          {% endfor %}
        </div>
        
        {% if section.settings.left_quote != blank %}
          <blockquote class="book__quote-text">
            "{{ section.settings.left_quote }}"
          </blockquote>
        {% endif %}
        
        {% if section.settings.left_author_image != blank or section.settings.left_author_name != blank %}
          <div class="book__author">
            {% if section.settings.left_author_image != blank %}
              {% render 'responsive-image',
                image: section.settings.left_author_image,
                alt: section.settings.left_author_name | default: 'Author',
                class: 'book__author-image',
                sizes: '60px',
                widths: '60,120',
                width: '60',
                height: '60',
                aspect_ratio: '1/1'
              %}
            {% endif %}
            <div class="book__author-info">
              {% if section.settings.left_author_name != blank %}
                <div class="book__author-name">{{ section.settings.left_author_name }}</div>
              {% endif %}
              {% if section.settings.left_author_bio != blank %}
                <div class="book__author-bio">{{ section.settings.left_author_bio }}</div>
              {% endif %}
            </div>
          </div>
        {% endif %}
      </div>
      
      {% comment %} Center Book Image {% endcomment %}
      <div class="book__image-wrapper">
        {% if section.settings.book_image != blank %}
          {% render 'responsive-image',
            image: section.settings.book_image,
            alt: section.settings.book_alt_text | default: 'Book cover',
            class: 'book__image',
            sizes: '(max-width: 575px) 80vw, (max-width: 991px) 50vw, 400px',
            widths: '300,400,600,800',
            aspect_ratio: '2/3'
          %}
        {% endif %}
        
        {% if section.settings.badge_text != blank %}
          <div class="book__badge">
            {{ section.settings.badge_text }}
          </div>
        {% endif %}
      </div>
      
      {% comment %} Right Quote {% endcomment %}
      <div class="book__quote book__quote--right">
        <div class="book__stars">
          {% for i in (1..5) %}
            <svg class="book__star" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/>
            </svg>
          {% endfor %}
        </div>
        
        {% if section.settings.right_quote != blank %}
          <blockquote class="book__quote-text">
            "{{ section.settings.right_quote }}"
          </blockquote>
        {% endif %}
        
        {% if section.settings.right_author_image != blank or section.settings.right_author_name != blank %}
          <div class="book__author">
            {% if section.settings.right_author_image != blank %}
              {% render 'responsive-image',
                image: section.settings.right_author_image,
                alt: section.settings.right_author_name | default: 'Author',
                class: 'book__author-image',
                sizes: '60px',
                widths: '60,120',
                width: '60',
                height: '60',
                aspect_ratio: '1/1'
              %}
            {% endif %}
            <div class="book__author-info">
              {% if section.settings.right_author_name != blank %}
                <div class="book__author-name">{{ section.settings.right_author_name }}</div>
              {% endif %}
              {% if section.settings.right_author_bio != blank %}
                <div class="book__author-bio">{{ section.settings.right_author_bio }}</div>
              {% endif %}
            </div>
          </div>
        {% endif %}
      </div>
      
    </div>
    
    {% comment %} CTA Button {% endcomment %}
    {% if section.settings.show_cta and section.settings.cta_text != blank %}
      <div class="book__cta-wrapper">
        <a href="{{ section.settings.cta_link | default: '#' }}" 
           class="book__cta {% if section.settings.use_gradient_button %}book__cta--gradient{% endif %}"
           style="color: var(--c-white) !important;"
           {% if section.settings.cta_new_tab %}target="_blank" rel="noopener"{% endif %}>
          {{ section.settings.cta_text }}
        </a>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Book - Details",
  "elements": [
    {
      "type": "text",
      "id": "top_text",
      "label": "Top Text",
      "default": "THE INSTANT WORLDWIDE BESTSELLER"
    },
    {
      "type": "image_picker",
      "id": "book_image",
      "label": "Book Image"
    },
    {
      "type": "text",
      "id": "book_alt_text",
      "label": "Book Alt Text",
      "default": "Book cover"
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge Text",
      "default": "OVER 20 MILLION COPIES SOLD"
    },
    {
      "type": "header",
      "content": "Left Quote"
    },
    {
      "type": "textarea",
      "id": "left_quote",
      "label": "Left Quote Text"
    },
    {
      "type": "image_picker",
      "id": "left_author_image",
      "label": "Left Author Image"
    },
    {
      "type": "text",
      "id": "left_author_name",
      "label": "Left Author Name"
    },
    {
      "type": "text",
      "id": "left_author_bio",
      "label": "Left Author Bio"
    },
    {
      "type": "header",
      "content": "Right Quote"
    },
    {
      "type": "textarea",
      "id": "right_quote",
      "label": "Right Quote Text"
    },
    {
      "type": "image_picker",
      "id": "right_author_image",
      "label": "Right Author Image"
    },
    {
      "type": "text",
      "id": "right_author_name",
      "label": "Right Author Name"
    },
    {
      "type": "text",
      "id": "right_author_bio",
      "label": "Right Author Bio"
    },
    {
      "type": "header",
      "content": "Call to Action"
    },
    {
      "type": "checkbox",
      "id": "show_cta",
      "label": "Show CTA Button",
      "default": false
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Button Text",
      "default": "Order Your Copy"
    },
    {
      "type": "text",
      "id": "cta_link",
      "label": "Button Link",
      "default": "#"
    },
    {
      "type": "checkbox",
      "id": "cta_new_tab",
      "label": "Open in New Tab",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "use_gradient_button",
      "label": "Use Brand Gradient Button",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "elements": [
        {
          "type": "image_picker",
          "id": "logo_image",
          "label": "Logo Image"
        },
        {
          "type": "text",
          "id": "logo_alt_text",
          "label": "Logo Alt Text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Book Section",
      "category": "Content",
      "blocks": [
        {
          "type": "logo"
        },
        {
          "type": "logo"
        },
        {
          "type": "logo"
        },
        {
          "type": "logo"
        }
      ]
    }
  ]
}
{% endschema %}